# 확정급여채무평가 데이터 검증 지식 베이스

## 1. 확정급여채무평가 개요

### 1.1 기본 개념
- **확정급여(DC) 제도**: 근로자 퇴직 시 지급되는 퇴직금을 사전에 확정하는 제도
- **채무평가**: 특정 시점(평가기준일)에서 향후 지급해야 할 퇴직금 총액을 산출하는 작업
- **평가기준일**: 일반적으로 회계연도 말일(예: 2022.12.31)

### 1.2 주요 명부 구성
확정급여채무평가 데이터는 일반적으로 다음 시트로 구성됩니다:
- **재직자 명부**: 평가기준일 현재 재직 중인 직원 정보
- **퇴직자 명부**: 평가기준일 이전에 퇴직한 직원 정보
- **중간정산 명부**: 재직 중 퇴직금 일부를 선지급 받은 직원 정보

---

## 2. 핵심 검증 규칙 (Core Validation Rules)

### 2.1 명부 간 일관성 (Cross-Sheet Consistency)

#### 규칙 2.1.1: 사원번호 중복 금지
- **검증 항목**: 재직자 명부와 퇴직자 명부에서 동일한 사원번호가 존재하는지 확인
- **오류 유형**: 심각 (Critical)
- **검증 방법**:
  ```
  1. 재직자 명부의 사원번호 컬럼 추출
  2. 퇴직자 명부의 사원번호 컬럼 추출
  3. 두 집합의 교집합 확인
  4. 교집합이 존재하면 오류 보고
  ```
- **영향도**: 
  - 평가액이 중복 산출될 위험
  - 전체 채무평가 금액의 신뢰성 저하
- **해결 방안**: 
  - 해당 사원의 실제 상태 확인 (재직/퇴직)
  - 올바른 명부로 이동
  - 중복 레코드 삭제

#### 규칙 2.1.2: 사원번호 내부 중복 확인
- **검증 항목**: 동일 명부 내에서 사원번호 중복 확인
- **오류 유형**: 심각 (Critical)
- **검증 방법**: 각 명부별로 사원번호의 고유성 확인

---

### 2.2 분류의 정확성 (Classification Accuracy)

#### 규칙 2.2.1: 중간정산자 분류 검증
- **검증 항목**: 중간정산 내역이 있는 인원은 반드시 재직자 명부에 있어야 함
- **오류 유형**: 심각 (Critical)
- **논리적 근거**: 
  - 중간정산은 재직 중 퇴직금 일부를 선지급 받는 제도
  - 퇴직자 명부에 중간정산자가 있다면 논리적 모순
- **검증 방법**:
  ```
  1. 중간정산 명부의 사원번호 추출
  2. 각 사원번호가 재직자 명부에 존재하는지 확인
  3. 퇴직자 명부에만 존재하는 경우 오류 보고
  ```
- **영향도**: 
  - 중간정산 금액이 최종 퇴직금 계산에서 누락될 위험
  - 채무평가액 부정확
- **해결 방안**: 
  - 중간정산자를 재직자 명부로 이동
  - 중간정산 금액을 재직자 명부에 반영

#### 규칙 2.2.2: 재직/퇴직 상태 일관성
- **검증 항목**: 평가기준일 기준으로 재직/퇴직 상태가 명확히 구분되어야 함
- **오류 유형**: 중요 (Important)
- **검증 방법**: 평가기준일과 입사일/퇴직일 비교

---

### 2.3 시간의 인과관계 (Temporal Causality)

#### 규칙 2.3.1: 날짜 순서 검증
- **검증 항목**: 모든 날짜는 논리적 순서를 따라야 함
- **필수 순서**: 
  ```
  생년월일 < 입사일 < 중간정산일 < 퇴직일 < 평가기준일(2022.12.31)
  ```
- **오류 유형**: 중요 (Important)
- **검증 시나리오**:
  1. **재직자**: 생년월일 < 입사일 < 평가기준일
  2. **퇴직자**: 생년월일 < 입사일 < 퇴직일 < 평가기준일
  3. **중간정산자**: 생년월일 < 입사일 < 중간정산일 < 평가기준일
- **영향도**: 
  - 날짜 오류는 근속기간 계산 오류로 이어짐
  - 퇴직금 계산식의 기초 데이터 오류
- **해결 방안**: 
  - 원본 인사 데이터와 대조 확인
  - 날짜 입력 오류 수정

#### 규칙 2.3.2: 평가기준일 이후 데이터 확인
- **검증 항목**: 평가기준일(2022.12.31) 이후의 입사일/퇴직일은 존재할 수 없음
- **오류 유형**: 심각 (Critical)
- **검증 방법**: 모든 날짜 필드가 평가기준일 이전인지 확인

---

### 2.4 데이터 정합성 (Data Integrity)

#### 규칙 2.4.1: 근속기간 vs 퇴직금 추계액
- **검증 항목**: 근속기간이 1년 이상인데 퇴직금 추계액이 0원인 경우
- **오류 유형**: 중요 (Important)
- **논리적 근거**: 
  - 근속기간 1년 이상이면 최소한의 퇴직금이 발생해야 함
  - 0원은 데이터 누락이나 계산식 오류를 의미
- **검증 방법**:
  ```
  1. 근속기간 컬럼 확인 (또는 입사일로부터 계산)
  2. 퇴직금 추계액 컬럼 확인
  3. 근속기간 >= 1년 AND 퇴직금 = 0인 레코드 찾기
  ```
- **예외 사항**: 
  - 특별한 계약 조건 (예: 퇴직금 제외 계약)
  - 하지만 이런 경우도 명시적으로 표기되어야 함
- **영향도**: 
  - 채무평가액 저평가
  - 회계 처리 오류
- **해결 방안**: 
  - 원본 급여 데이터 확인
  - 퇴직금 계산식 재검토
  - 특별 사유가 있다면 명시

#### 규칙 2.4.2: 필수 컬럼 존재 여부
- **검증 항목**: 필수 정보가 누락되지 않았는지 확인
- **필수 컬럼**:
  - 사원번호 (고유 식별자)
  - 성명
  - 입사일
  - 생년월일 (또는 나이)
  - 퇴직금 추계액 (또는 관련 계산 필드)
- **오류 유형**: 중요 (Important)

#### 규칙 2.4.3: 숫자 데이터 형식 검증
- **검증 항목**: 금액, 기간 등 숫자 데이터의 형식 및 범위 확인
- **검증 항목**:
  - 음수 금액 존재 여부 (일반적으로 불가)
  - 비정상적으로 큰 값 (입력 오류 가능)
  - 텍스트가 숫자 필드에 포함된 경우

---

## 3. 심화 검증 규칙 (Advanced Validation Rules)

### 3.1 통계적 이상치 검증
- **평균 퇴직금 대비 이상치**: 평균의 3배 이상 또는 1/3 이하인 경우
- **근속기간 대비 퇴직금 비율**: 동일 근속기간 대비 퇴직금이 현저히 다른 경우

### 3.2 비즈니스 로직 검증
- **퇴직금 계산식 검증**: 
  - 일반 공식: (최근 3개월 평균 임금) × (근속연수)
  - 실제 데이터가 이 공식과 일치하는지 샘플링 검증
- **중간정산 차감 확인**: 
  - 최종 퇴직금 = 추계 퇴직금 - 중간정산액
  - 중간정산자가 있는 경우 차감이 올바르게 반영되었는지 확인

### 3.3 데이터 완전성 검증
- **명부 간 합계 일관성**: 
  - 재직자 수 + 퇴직자 수 = 전체 사원 수 (평가기준일 기준)
- **시트 간 참조 무결성**: 
  - 중간정산 명부의 사원번호가 재직자 명부에 존재하는지 확인

---

## 4. 검증 체크리스트 (Validation Checklist)

### 4.1 필수 검증 항목 (Must Check)
- [ ] 재직자 명부와 퇴직자 명부 간 사원번호 중복 확인
- [ ] 각 명부 내부 사원번호 중복 확인
- [ ] 중간정산자가 재직자 명부에 있는지 확인
- [ ] 모든 날짜가 논리적 순서를 따르는지 확인
- [ ] 평가기준일 이후 날짜 데이터 존재 여부 확인
- [ ] 근속기간 1년 이상인데 퇴직금이 0원인 경우 확인

### 4.2 권장 검증 항목 (Should Check)
- [ ] 필수 컬럼 누락 여부 확인
- [ ] 숫자 데이터 형식 및 범위 확인
- [ ] 통계적 이상치 확인
- [ ] 퇴직금 계산식 샘플링 검증
- [ ] 중간정산 차감 반영 여부 확인

### 4.3 선택 검증 항목 (Optional Check)
- [ ] 명부 간 합계 일관성 확인
- [ ] 시트 간 참조 무결성 확인
- [ ] 데이터 타임스탬프 확인

---

## 5. 오류 분류 및 심각도

### 5.1 심각 (Critical) - 즉시 수정 필요
- 사원번호 중복 (명부 간 또는 명부 내)
- 중간정산자 분류 오류
- 평가기준일 이후 날짜 데이터

### 5.2 중요 (Important) - 수정 권장
- 날짜 순서 오류
- 근속기간 대비 퇴직금 0원
- 필수 컬럼 누락

### 5.3 경미 (Minor) - 확인 권장
- 통계적 이상치
- 숫자 형식 오류 (수정 가능한 범위)

---

## 6. 검증 결과 보고 형식

### 6.1 구어체 커뮤니케이션 원칙
- **친절한 톤**: "담당자님, 데이터를 살펴보니..."
- **이유 설명**: 단순 오류 지적이 아닌, 계리 평가 시 영향 설명
- **구체적 제안**: 해결 방안 및 추가 요청 자료 명시

### 6.2 보고 예시
```
담당자님, 보내주신 엑셀 데이터를 정밀하게 검토해 보았습니다.

우선, 사원번호 190001님의 데이터에 중복이 발생하고 있습니다. 
재직자 명부와 퇴직자 명부에 동시에 존재하는데, 이는 평가액이 
중복 산출될 위험이 있어 전체 채무평가 금액의 신뢰성을 저하시킬 
수 있습니다. 해당 사원의 실제 상태(재직/퇴직)를 확인하시고 
올바른 명부로 이동해 주시기 바랍니다.

또한, 김철수 님의 경우 2022년에 중간정산을 하셨는데 퇴직자 명부에 
들어있습니다. 중간정산자는 재직 중 퇴직금 일부를 선지급 받은 
재직자이므로, 재직자 명부로 옮겨주셔야 정확한 계리 평가가 가능합니다. 
이렇게 하지 않으면 중간정산 금액이 최종 퇴직금 계산에서 누락될 
위험이 있습니다.
```

---

## 7. 참고 사항

### 7.1 평가기준일
- 일반적으로 회계연도 말일: **2022.12.31**
- 모든 날짜 검증의 기준점

### 7.2 명부 구성 예시
- **재직자 명부**: 평가기준일 현재 재직 중인 모든 직원
- **퇴직자 명부**: 평가기준일 이전에 퇴직한 모든 직원
- **중간정산 명부**: 재직 중 퇴직금 일부를 선지급 받은 직원 (재직자 명부에 포함되어야 함)

### 7.3 데이터 소스 확인
- 검증 시 원본 인사 데이터, 급여 데이터와의 대조가 필요할 수 있음
- 불확실한 경우 고객사에 추가 자료 요청 권장
